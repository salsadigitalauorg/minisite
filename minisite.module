<?php

/**
 * @file
 * Main functions of the module.
 */

use Drupal\Core\Routing\RouteMatchInterface;

define('MINISITE_UPLOAD_PATH', 'minisite/upload');
define('MINISITE_ASSET_PATH', 'minisite/static');
define('MINISITE_EXTENSIONS_WHITELIST', 'html htm js css png jpg gif svg pdf doc docx ppt pptx xls xlsx tif xml txt woff woff2 ttf eot');
define('MINISITE_EXTENSIONS_BLACKLIST', 'exe scr bmp');
define('MINISITE_EXTENSIONS_NOREWRITE', 'pdf doc docx ppt pptx xls xlsx tif xml txt');
define('MINISITE_MAXFILESIZE', format_size(file_upload_max_size()));

// Load lib for Minisite.
require_once dirname(__FILE__) . '/includes/minisite.loader.inc';
// Load all theme hooks for Minisite.
require_once dirname(__FILE__) . '/includes/minisite.theme.inc';
// Load all site functions for Minisite.
require_once dirname(__FILE__) . '/includes/minisite.site.inc';
// Load all Field module hooks for Minisite.
require_once dirname(__FILE__) . '/includes/minisite.field.inc';

/**
 * Implements hook_help().
 */
function minisite_help($route_name, RouteMatchInterface $route_match) {
  switch ($route_name) {
    case 'help.page.minisite':
      $output = '';
      $output .= '<h3>' . t('About') . '</h3>';
      $output .= '<p>' . t('Provides the ability to upload arbitrary \'minisites\' to a Drupal website.') . '</p>';

      return $output;
  }
}
